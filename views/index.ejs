<%- include("partials/header") %>

<h2>All Chats</h2>
<div class="chat-grid">
  <% chats.forEach(chat => { %>
    <div class="chat-card">
      <div class="chat-header">
        <span class="from"><%= chat.from %></span>
        <span class="to">âž¡ <%= chat.to %></span>
      </div>
      <p class="message"><%= chat.msg %></p>
      
      <div class="actions">
        <a href="/chats/<%= chat._id %>/edit" class="btn-secondary">Edit</a>
        <form action="/chats/<%= chat._id %>?_method=DELETE" method="POST" style="display:inline;">
          <button type="submit" class="btn-danger">Delete</button>
        </form>
      </div>

      <!-- Add Date & Time -->
      <div class="chat-time">
        <%= chat.created_at.toLocaleString('en-US', { weekday: 'short', year:'numeric', month:'short', day:'numeric', hour:'2-digit', minute:'2-digit' }) %>
      </div>
    </div>
  <% }) %>
</div>

<%- include("partials/footer") %>
